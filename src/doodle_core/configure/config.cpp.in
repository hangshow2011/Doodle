

#include <configure/config.h>
#include <string>
#include <chrono>
namespace doodle::version {

// clang-format off
#define DOODLE_VERSION_MAJOR_ @Doodle_VERSION_MAJOR@
#define DOODLE_VERSION_MINOR_ @Doodle_VERSION_MINOR@
#define DOODLE_VERSION_PATCH_ @Doodle_VERSION_PATCH@
#define DOODLE_VERSION_TWEAK_ @Doodle_VERSION_TWEAK@
// clang-format on

build_info::build_info() {
  std::int16_t version_major = {DOODLE_VERSION_MAJOR_};
  std::int16_t version_minor = {DOODLE_VERSION_MINOR_};
  std::int16_t version_patch = {DOODLE_VERSION_PATCH_};
  std::int16_t version_tweak = {DOODLE_VERSION_TWEAK_};
  std::string version_str    = {"@v_short@"};
  std::string build_time{"@DOODLE_BUILD_TIME@"};
}

build_info& build_info::get() {
  static build_info local_{};
  return local_;
}
#undef DOODLE_VERSION_MAJOR_
#undef DOODLE_VERSION_MINOR_
#undef DOODLE_VERSION_PATCH_
#undef DOODLE_VERSION_TWEAK_
}  // namespace doodle::version
