
cmrc_add_resource_library(
        DoodleLibResource
        resource/abcExport.py
        resource/icon.ico
        resource/mayaExport.py
        resource/mayaIcon.png
        resource/Ue4CraeteLevel.py
        resource/ue4Icon.png
        resource/zhtopy.txt

)
include(doodle_exe)
include(DoodleLib.cmake)

add_custom_target(
        create_list_doodle_cmake
        COMMAND ${CMAKE_COMMAND} -P ListFile.cmake
        WORKING_DIRECTORY ${CMAKE_CURRENT_LIST_DIR}
)
doodle_sqlpp_generate(
        OUT_LISTS_sqlpp
        NAME
        core/000-metadatatab.sql
)
doodle_grpc_generate(
        OUT_LISTS_MetadataServer
        NAME
        rpc/MetadataServer.proto
)
doodle_grpc_generate(
        OUT_LISTS_FileSystemServer
        NAME
        rpc/FileSystemServer.proto
)

add_doodle(
        NAME DoodleLib
        LISTS_FILES
        ${DOODLELIB_HEADER}
        ${DOODLELIB_SOURCE}
        ${OUT_LISTS_sqlpp}
        ${OUT_LISTS_MetadataServer}
        ${OUT_LISTS_FileSystemServer}
        main/doodle.manifest
)
add_doodle(
        NAME DoodleExe
        IS_EXE
        LISTS_FILES
        ${DOODLELIB_HEADER}
        ${DOODLELIB_SOURCE}
        ${OUT_LISTS_sqlpp}
        ${OUT_LISTS_MetadataServer}
        ${OUT_LISTS_FileSystemServer}
        main/doodle.manifest
        main/icon.ico
        main/win_exe.rc
        main/gui/main.cpp
)
add_doodle(
        NAME doodleServerExe
        IS_EXE
        LISTS_FILES
        ${DOODLELIB_HEADER}
        ${DOODLELIB_SOURCE}
        ${OUT_LISTS_sqlpp}
        ${OUT_LISTS_MetadataServer}
        ${OUT_LISTS_FileSystemServer}
        main/doodle.manifest
        main/icon.ico
        main/win_exe.rc
        main/server/main.cpp
)
